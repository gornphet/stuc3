<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>โครงสร้างกองการศึกษา เทศบาลตำบลหัวดง</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f8fafc;
        }
        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tree-line-v {
            width: 2px;
            background-color: #cbd5e1;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- Icon Components ---
        const Icon = ({ name, size = 20, className = "" }) => {
            const icons = {
                award_full: <g><circle cx="12" cy="8" r="7" /><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88" /></g>,
                briefcase: <g><rect width="20" height="14" x="2" y="7" rx="2" ry="2" /><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" /></g>,
                school: <g><path d="m4 6 8-4 8 4" /><path d="m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2" /><path d="M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4" /><path d="M18 5v17" /><path d="M6 5v17" /><circle cx="12" cy="9" r="2" /></g>,
                baby: <g><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"/></g>,
                network: <g><rect x="16" y="16" width="6" height="6" rx="1"/><rect x="2" y="16" width="6" height="6" rx="1"/><rect x="9" y="2" width="6" height="6" rx="1"/><path d="M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"/><path d="M12 12V8"/></g>,
                layers: <g><polygon points="12 2 2 7 12 12 22 7 12 2" /><polyline points="2 17 12 22 22 17" /><polyline points="2 12 12 17 22 12" /></g>,
                graduationCap: <g><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></g>
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || <circle cx="12" cy="12" r="10"/>}
                </svg>
            );
        };

        // --- Data ---
        const orgData = {
            root: { title: "กองการศึกษา", role: "เทศบาลตำบลหัวดง", icon: "award_full", color: "slate" },
            department: {
                title: "ฝ่ายบริหารงานศึกษา",
                color: "blue",
                icon: "briefcase",
                tasks: [
                    "1. งานธุรการ", "2. งานการเจ้าหน้าที่", "3. งานวางแผนบุคคลและทะเบียนประวัติ",
                    "4. งานโรงเรียนและงานการศึกษาปฐมวัย", "5. งานกิจการนักเรียน", "6. งานส่งเสริมคุณภาพและมาตรฐานหลักสูตร",
                    "7. งานพัฒนาสื่อเทคโนโลยีและนวัตกรรมฯ", "8. งานแผนและโครงการ", "9. งานงบประมาณ",
                    "10. งานกีฬาและนันทนาการ", "11. งานกิจการศาสนา", "12. งานส่งเสริม ประเพณี ศิลปวัฒนธรรม"
                ],
                schoolsNode: {
                    title: "สถานศึกษาในสังกัด",
                    color: "emerald",
                    icon: "school",
                    list: [
                        { title: "รร.เทศบาลหัวดง (ป.ฟักอังกูร)", description: "แบ่งเป็น 4 ฝ่ายงาน", type: "school", details: ["ฝ่ายวิชาการ", "ฝ่ายบริหาร", "ฝ่ายปกครอง", "ฝ่ายบริการ"] },
                        { title: "ศพด.เทศบาลตำบลหัวดง", description: "แบ่งเป็น 3 ฝ่ายงาน", type: "center", details: ["งานบริหารงานทั่วไป", "งานจัดการเรียนการสอน", "งานการเงิน บัญชี และพัสดุ"] }
                    ]
                }
            }
        };

        // --- Components ---
        const NodeCard = ({ title, role, iconName, color, isRoot = false }) => {
            const styles = {
                slate: "bg-slate-800 text-white border-slate-700",
                blue: "bg-white text-slate-800 border-blue-200 border-t-4 border-t-blue-500",
                emerald: "bg-white text-slate-800 border-emerald-200 border-t-4 border-t-emerald-500",
            };
            const styleClass = styles[color] || styles.slate;

            return (
                <div className={`relative z-10 flex flex-col items-center justify-center p-4 rounded-xl shadow-md border min-w-[220px] max-w-[280px] transition-transform hover:scale-105 duration-200 ${styleClass}`}>
                    <div className={`p-2 rounded-full mb-2 ${isRoot ? 'bg-white/10' : 'bg-slate-50'}`}>
                        <Icon name={iconName} className={isRoot ? "text-yellow-400" : ""} />
                    </div>
                    <h3 className={`font-bold text-center ${isRoot ? 'text-lg' : 'text-base'}`}>{title}</h3>
                    {role && <p className={`text-xs text-center mt-1 ${isRoot ? 'text-slate-300' : 'text-slate-500'}`}>{role}</p>}
                </div>
            );
        };

        const SchoolCard = ({ data }) => {
            const isSchool = data.type === 'school';
            const color = isSchool ? 'emerald' : 'orange';
            const iconName = isSchool ? 'graduationCap' : 'baby';
            
            return (
                <div className={`bg-white p-4 rounded-xl shadow-sm border-l-4 border-${color}-500 w-full`}>
                    <div className="flex items-center gap-2 mb-2">
                        <div className={`p-1.5 bg-${color}-100 text-${color}-600 rounded-lg`}><Icon name={iconName} size={16} /></div>
                        <div>
                            <h4 className="font-bold text-slate-800 text-sm">{data.title}</h4>
                            <span className={`text-[10px] px-1.5 py-0.5 rounded bg-${color}-50 text-${color}-700 border border-${color}-100`}>{data.description}</span>
                        </div>
                    </div>
                    <div className="grid grid-cols-1 gap-1 pl-2 border-l-2 border-slate-100 ml-3">
                        {data.details.map((d, i) => (
                            <div key={i} className="flex items-center text-xs text-slate-600 pl-2">
                                <div className={`w-1 h-1 rounded-full bg-${color}-400 mr-2`}></div>
                                {d}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // --- Main App ---
        const EducationChart = () => {
            const [activeTab, setActiveTab] = useState('overview');
            const tabs = [
                { id: 'overview', label: '1. ภาพรวม (Tree Diagram)', icon: 'network', color: 'slate' },
                { id: 'division', label: '2. กองการศึกษา', icon: 'briefcase', color: 'blue' },
                { id: 'schools', label: '3. สถานศึกษาในสังกัด', icon: 'school', color: 'emerald' },
            ];

            return (
                <div className="min-h-screen font-sans p-4 pb-12 bg-slate-50">
                    {/* Navigation */}
                    <div className="flex justify-center mb-8 sticky top-4 z-50">
                        <div className="bg-white/90 backdrop-blur shadow-lg border border-slate-200 p-1.5 rounded-2xl inline-flex gap-1 overflow-x-auto max-w-full">
                            {tabs.map(tab => (
                                <button key={tab.id} onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center space-x-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${activeTab === tab.id ? `bg-${tab.color}-600 text-white shadow` : 'text-slate-500 hover:bg-slate-100'}`}>
                                    <Icon name={tab.icon} size={18} />
                                    <span className="whitespace-nowrap">{tab.label}</span>
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="max-w-5xl mx-auto">
                        {activeTab === 'overview' && (
                            <div className="fade-in flex flex-col items-center pb-20">
                                {/* LEVEL 1: Root */}
                                <NodeCard title={orgData.root.title} role={orgData.root.role} iconName={orgData.root.icon} color={orgData.root.color} isRoot={true} />
                                <div className="tree-line-v h-8"></div>
                                
                                {/* LEVEL 2: Admin Dept + Tasks (Grouped) */}
                                <div className="flex flex-col items-center bg-blue-50/50 p-6 rounded-3xl border border-blue-100 shadow-inner relative max-w-3xl w-full">
                                    <div className="absolute -top-3 bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-xs font-bold border border-blue-200">ส่วนราชการ</div>
                                    
                                    <NodeCard title={orgData.department.title} iconName={orgData.department.icon} color={orgData.department.color} />
                                    
                                    <div className="tree-line-v h-6"></div>
                                    
                                    {/* Tasks Grid */}
                                    <div className="w-full bg-white rounded-2xl p-4 border border-blue-100 shadow-sm">
                                        <h4 className="text-center text-blue-800 font-bold mb-3 text-sm flex items-center justify-center gap-2">
                                            <Icon name="layers" size={16} /> แบ่งงานออกเป็น 12 ภาระงาน
                                        </h4>
                                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-2 text-left">
                                            {orgData.department.tasks.map((task, idx) => (
                                                <div key={idx} className="text-xs text-slate-600 bg-slate-50 p-2 rounded-lg border border-slate-100 flex items-start hover:bg-blue-50 transition-colors">
                                                    <span className="inline-block w-1.5 h-1.5 bg-blue-400 rounded-full mt-1.5 mr-2 shrink-0"></span>
                                                    {task.substring(task.indexOf(' ')+1)}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>

                                <div className="tree-line-v h-12"></div>

                                {/* LEVEL 3: Schools Section (Explicitly Lower) */}
                                <div className="flex flex-col items-center relative w-full max-w-3xl">
                                    {/* Connector Logic: Simple vertical drop to show hierarchy */}
                                    <NodeCard title={orgData.department.schoolsNode.title} iconName={orgData.department.schoolsNode.icon} color={orgData.department.schoolsNode.color} />
                                    
                                    <div className="tree-line-v h-8"></div>

                                    {/* Branching for Schools */}
                                    <div className="relative w-full px-4">
                                        {/* Horizontal Line */}
                                        <div className="absolute top-0 left-1/2 -translate-x-1/2 w-1/2 h-4 border-t-2 border-slate-300"></div>
                                        {/* Vertical Connectors */}
                                        <div className="absolute top-0 left-1/4 h-4 w-0.5 bg-slate-300"></div>
                                        <div className="absolute top-0 right-1/4 h-4 w-0.5 bg-slate-300"></div>

                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                                            <SchoolCard data={orgData.department.schoolsNode.list[0]} />
                                            <SchoolCard data={orgData.department.schoolsNode.list[1]} />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'division' && (
                            <div className="fade-in max-w-4xl mx-auto">
                                <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                                    <div className="bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white">
                                        <h2 className="text-2xl font-bold flex items-center gap-3"><Icon name="briefcase" /> ฝ่ายบริหารงานศึกษา</h2>
                                        <p className="text-blue-100 mt-1 pl-9">รวมภาระงานทั้งหมด 12 ด้าน</p>
                                    </div>
                                    <div className="p-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                                        {orgData.department.tasks.map((task, i) => (
                                            <div key={i} className="flex items-center p-4 rounded-xl border border-slate-100 bg-slate-50 hover:bg-blue-50 hover:border-blue-200 transition-all">
                                                <div className="w-8 h-8 rounded-full bg-white text-blue-600 shadow-sm flex items-center justify-center font-bold text-sm mr-3 border border-blue-100">{i + 1}</div>
                                                <span className="text-slate-700 font-medium">{task.substring(task.indexOf(' ')+1)}</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'schools' && (
                            <div className="fade-in max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6">
                                {orgData.department.schoolsNode.list.map((school, i) => (
                                    <div key={i} className={`bg-white rounded-2xl shadow-sm overflow-hidden border-t-4 ${i === 0 ? 'border-emerald-500' : 'border-orange-500'}`}>
                                        <div className="p-6">
                                            <div className="flex justify-between items-start mb-4">
                                                <h3 className="text-lg font-bold text-slate-800">{school.title}</h3>
                                                <div className={`p-2 rounded-lg ${i === 0 ? 'bg-emerald-100 text-emerald-600' : 'bg-orange-100 text-orange-600'}`}>
                                                    <Icon name={i === 0 ? 'school' : 'baby'} />
                                                </div>
                                            </div>
                                            <div className="space-y-3">
                                                <div className={`text-xs font-bold uppercase tracking-wider ${i === 0 ? 'text-emerald-600' : 'text-orange-600'}`}>{school.description}</div>
                                                {school.details.map((detail, idx) => (
                                                    <div key={idx} className={`flex items-center p-2 rounded-lg border ${i === 0 ? 'bg-emerald-50 border-emerald-100' : 'bg-orange-50 border-orange-100'}`}>
                                                        <div className={`w-1.5 h-1.5 rounded-full mr-2 ${i === 0 ? 'bg-emerald-500' : 'bg-orange-500'}`}></div>
                                                        <span className="text-sm text-slate-700">{detail}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<EducationChart />);
    </script>
</body>
</html>